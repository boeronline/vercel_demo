<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Web Development with Codex</title>
    <meta
      name="description"
      content="Discover how Codex crafts polished, mobile-first web experiences with modern design, inclusive content, and performance at heart."
    />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page-shell">
      <header class="site-header" aria-label="Site introduction">
        <div class="header-top">
          <div class="brand">
            <span class="logo" aria-hidden="true">⌘</span>
            <span class="brand-wordmark">Codex Studio</span>
          </div>
          <nav class="swipe-nav" aria-label="Primary">
            <div class="nav-track" id="primary-navigation">
              <a class="nav-pill" href="#services">Services</a>
              <a class="nav-pill" href="#highlights">Highlights</a>
              <a class="nav-pill" href="#testimonial">Story</a>
              <a class="nav-pill" href="#contact">Contact</a>
            </div>
          </nav>
          <p class="mobile-pager-hint" aria-hidden="true">
            Use the menu to jump between sections—no endless scrolling required.
          </p>
        </div>
        <div class="intro">
          <p class="eyebrow">Codex Studio</p>
          <h1>Web Development for the imaginative web.</h1>
          <p class="lede">
            We build responsive, content-rich experiences that celebrate craft, accessibility, and performance.
            Explore how Codex partners with teams to turn ideas into living, breathing web products.
          </p>
          <div class="cta-group">
            <a class="btn primary" href="#contact">Start a project</a>
            <a class="btn ghost" href="#services">See services</a>
          </div>
        </div>
      </header>

      <main>
        <section id="services" class="section services" aria-labelledby="services-heading">
          <div class="section-heading">
            <p class="section-eyebrow">What we craft</p>
            <h2 id="services-heading">Tailored web development, powered by Codex.</h2>
            <p>
              From prototypes to production-ready launches, we shape every layer of your web presence with a mobile-first mindset
              and a devotion to clarity.
            </p>
          </div>
          <div class="card-grid">
            <article class="card" aria-label="Design systems">
              <h3>Design systems</h3>
              <p>
                Component libraries, fluid typography, and beautiful motion that keeps your brand consistent across every pixel.
              </p>
            </article>
            <article class="card" aria-label="Content-driven sites">
              <h3>Content-driven sites</h3>
              <p>
                Editorial experiences optimized for reading on the go, with progressive enhancement and inclusive interactions.
              </p>
            </article>
            <article class="card" aria-label="Product foundations">
              <h3>Product foundations</h3>
              <p>
                Accessible forms, dashboards, and integrations that help you ship fast without sacrificing stability or delight.
              </p>
            </article>
          </div>
        </section>

        <section
          id="highlights"
          class="section highlights"
          aria-labelledby="highlights-heading"
        >
          <div class="section-heading">
            <p class="section-eyebrow">Codex in action</p>
            <h2 id="highlights-heading">The blueprint we bring to every build.</h2>
          </div>
          <ul class="highlight-list">
            <li>
              <h3>Mobile before all</h3>
              <p>
                We prototype in the smallest viewport first to guarantee fast loading, thumb-friendly navigation, and effortless
                content discovery.
              </p>
            </li>
            <li>
              <h3>Inclusive by default</h3>
              <p>
                Semantic HTML, contrast-perfect palettes, and mindful copy ensure every visitor is welcomed and supported.
              </p>
            </li>
            <li>
              <h3>Powered by Codex</h3>
              <p>
                Leveraging the Codex platform means rapid iteration, smart automation, and a partner that understands creative
                teams.
              </p>
            </li>
            <li>
              <h3>Performance obsessed</h3>
              <p>
                We audit Lighthouse scores, trim dependencies, and keep interactions silky smooth even on low-end devices.
              </p>
            </li>
          </ul>
        </section>

        <section
          id="testimonial"
          class="section testimonial"
          aria-label="Client testimonial"
        >
          <div class="quote-block">
            <p class="quote">“Codex translated our concepts into a mobile experience that feels handcrafted and effortless.”</p>
            <p class="attribution">— Lina Mora, Product Lead at Northwind Collective</p>
          </div>
        </section>

        <section class="section contact" id="contact" aria-labelledby="contact-heading">
          <div class="section-heading">
            <p class="section-eyebrow">Start something</p>
            <h2 id="contact-heading">Let’s build your next web chapter together.</h2>
            <p>Share your idea, and the Codex team will shape a roadmap tailored to your goals.</p>
          </div>
          <form class="contact-form" aria-label="Contact Codex">
            <label for="name">Name</label>
            <input id="name" name="name" type="text" autocomplete="name" placeholder="Your name" />

            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" placeholder="you@example.com" />

            <label for="project">Project vision</label>
            <textarea id="project" name="project" rows="4" placeholder="Tell us about the experience you imagine"></textarea>

            <button type="submit" class="btn primary">Send message</button>
          </form>
        </section>
      </main>

      <footer class="site-footer">
        <p>© <span id="year"></span> Codex Studio. Crafted with empathy for the web.</p>
      </footer>
    </div>

    <script>
      const yearEl = document.getElementById('year');
      const now = new Date();
      yearEl.textContent = now.getFullYear();

      const navTrack = document.querySelector('.nav-track');
      const navLinks = Array.from(document.querySelectorAll('.nav-pill'));
      const mainEl = document.querySelector('main');
      const sections = Array.from(document.querySelectorAll('main .section'));

      if (navTrack && navLinks.length > 0 && sections.length > 0) {
        navTrack.setAttribute('role', 'list');
        navTrack.setAttribute('tabindex', '0');
        navTrack.setAttribute('aria-orientation', 'horizontal');

        navLinks.forEach((link) => {
          link.setAttribute('role', 'listitem');
          link.addEventListener('click', (event) => {
            event.preventDefault();
            const targetId = link.getAttribute('href');
            const target = document.querySelector(targetId);

            if (!target) {
              return;
            }

            const sectionSlug = targetId.substring(1);

            if (isPagedMode) {
              activateSection(sectionSlug);
              setActiveLink(sectionSlug, { syncSection: false });
            } else {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
              setActiveLink(sectionSlug);
            }
          });
        });

        const pointerState = {
          isPointerDown: false,
          startX: 0,
          scrollLeft: 0,
          pointerId: null,
        };

        const releasePointer = () => {
          if (pointerState.pointerId !== null) {
            navTrack.releasePointerCapture(pointerState.pointerId);
          }
          pointerState.isPointerDown = false;
          pointerState.pointerId = null;
        };

        navTrack.addEventListener('pointerdown', (event) => {
          pointerState.isPointerDown = true;
          pointerState.startX = event.clientX;
          pointerState.scrollLeft = navTrack.scrollLeft;
          pointerState.pointerId = event.pointerId;
          navTrack.classList.add('is-grabbing');
          navTrack.setPointerCapture(event.pointerId);
        });

        navTrack.addEventListener('pointermove', (event) => {
          if (!pointerState.isPointerDown) {
            return;
          }

          const deltaX = event.clientX - pointerState.startX;
          navTrack.scrollLeft = pointerState.scrollLeft - deltaX;
        });

        navTrack.addEventListener('pointerup', () => {
          navTrack.classList.remove('is-grabbing');
          releasePointer();
        });

        navTrack.addEventListener('pointercancel', () => {
          navTrack.classList.remove('is-grabbing');
          releasePointer();
        });

        navTrack.addEventListener('keydown', (event) => {
          const isHorizontal = event.key === 'ArrowRight' || event.key === 'ArrowLeft';

          if (!isHorizontal) {
            return;
          }

          const direction = event.key === 'ArrowRight' ? 1 : -1;
          const focusable = navLinks;
          const currentIndex = focusable.indexOf(document.activeElement);
          const nextIndex = Math.min(
            focusable.length - 1,
            Math.max(0, currentIndex + direction)
          );

          if (focusable[nextIndex]) {
            focusable[nextIndex].focus();
            const targetId = focusable[nextIndex].getAttribute('href').substring(1);
            if (isPagedMode) {
              activateSection(targetId);
              setActiveLink(targetId, { syncSection: false });
            } else {
              setActiveLink(targetId);
            }
          }

          navTrack.scrollBy({
            left: direction * navTrack.clientWidth * 0.6,
            behavior: 'smooth',
          });
        });

        let isPagedMode = false;
        let activeSectionId = sections[0].id;

        const activateSection = (sectionId, { scrollToTop = true } = {}) => {
          if (!sections.some((section) => section.id === sectionId)) {
            return;
          }

          activeSectionId = sectionId;
          sections.forEach((section) => {
            const isTarget = section.id === sectionId;
            section.classList.toggle('is-active', isTarget);

            if (isPagedMode) {
              section.toggleAttribute('hidden', !isTarget);
              section.setAttribute('aria-hidden', isTarget ? 'false' : 'true');

              if (!isTarget) {
                section.setAttribute('inert', '');
              } else {
                section.removeAttribute('inert');
              }
            } else {
              section.removeAttribute('hidden');
              section.removeAttribute('aria-hidden');
              section.removeAttribute('inert');
            }
          });

          if (isPagedMode && scrollToTop) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
        };

        const setActiveLink = (sectionId, { syncSection = true } = {}) => {
          if (!sections.some((section) => section.id === sectionId)) {
            return;
          }

          activeSectionId = sectionId;

          navLinks.forEach((link) => {
            const isActive = link.getAttribute('href') === `#${sectionId}`;
            link.classList.toggle('is-active', isActive);

            if (isActive) {
              link.setAttribute('aria-current', 'true');

              requestAnimationFrame(() => {
                const linkRect = link.getBoundingClientRect();
                const trackRect = navTrack.getBoundingClientRect();
                const offset =
                  linkRect.left -
                  trackRect.left -
                  (trackRect.width - linkRect.width) / 2;
                navTrack.scrollBy({ left: offset, behavior: 'smooth' });
              });
            } else {
              link.removeAttribute('aria-current');
            }
          });

          if (isPagedMode && syncSection) {
            activateSection(sectionId, { scrollToTop: false });
          }
        };

        const observer = new IntersectionObserver(
          (entries) => {
            if (isPagedMode) {
              return;
            }

            const visible = entries
              .filter((entry) => entry.isIntersecting)
              .sort((a, b) => b.intersectionRatio - a.intersectionRatio);

            if (visible[0]) {
              setActiveLink(visible[0].target.id);
            }
          },
          {
            root: null,
            threshold: [0.3, 0.6, 0.9],
            rootMargin: '-40% 0px -50% 0px',
          }
        );

        sections.forEach((section) => observer.observe(section));

        if (sections[0]) {
          setActiveLink(sections[0].id);
        }

        const enablePagedMode = () => {
          if (isPagedMode || !mainEl) {
            return;
          }

          isPagedMode = true;
          mainEl.setAttribute('data-paged', 'true');
          observer.disconnect();

          activateSection(activeSectionId, { scrollToTop: false });
          setActiveLink(activeSectionId, { syncSection: false });
          window.scrollTo({ top: 0 });
        };

        const disablePagedMode = () => {
          if (!isPagedMode || !mainEl) {
            return;
          }

          isPagedMode = false;
          mainEl.removeAttribute('data-paged');

          sections.forEach((section) => {
            section.classList.remove('is-active');
            section.removeAttribute('hidden');
            section.removeAttribute('aria-hidden');
            section.removeAttribute('inert');
            observer.observe(section);
          });

          setActiveLink(activeSectionId);
        };

        const pagerMedia = window.matchMedia('(max-width: 720px)');

        const handleMediaChange = (event) => {
          if (event.matches) {
            enablePagedMode();
          } else {
            disablePagedMode();
          }
        };

        handleMediaChange(pagerMedia);

        if (typeof pagerMedia.addEventListener === 'function') {
          pagerMedia.addEventListener('change', handleMediaChange);
        } else if (typeof pagerMedia.addListener === 'function') {
          pagerMedia.addListener(handleMediaChange);
        }
      }
    </script>
  </body>
</html>
